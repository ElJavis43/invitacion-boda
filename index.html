<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitaci√≥n Karla & Edgar</title>

    <!-- FUENTES -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>

<!-- PORTADA -->
<section class="portada">
    <div class="portada-contenido animate">
        <h1 class="nombre-invitado">Nombre del Invitado</h1>

        <p class="pases">Pases asignados: X</p>

        <p class="pases" id="pases-ninos" style="display:none;">
            Pases para ni√±os: <strong><span id="num-ninos"></span></strong>
        </p>

        <p class="nota" id="texto-ninos">
            Nos encantar√≠a que los ni√±os nos acompa√±en en esta celebraci√≥n tan especial,
            les pedimos amablemente su ayuda para supervisarlos durante todo el evento.
        </p>

        <p class="nota" id="texto-no-ninos" style="display:none;">
            Adultos buena noche, ni√±os buenas noches<br>
            <strong>(no se aceptan ni√±os)</strong>
        </p>

        <a href="#invitacion" class="btn-principal" id="btnAsistir">Asistir</a>
    </div>
</section>

<!-- HERO -->
<section class="hero" id="invitacion">
    <div class="overlay"></div>
    <div class="hero-content animate">
        <h1 class="nombres">Karla & Edgar</h1>
        <p class="frase">Hemos decidido decir ‚Äús√≠‚Äù para toda la vida</p>
        <p class="fecha-grande">14 ¬∑ Marzo ¬∑ 2026</p>

        <div class="contador">
            <div><span id="d">0</span><small>D√≠as</small></div>
            <div><span id="h">0</span><small>Horas</small></div>
            <div><span id="m">0</span><small>Min</small></div>
            <div><span id="s">0</span><small>Seg</small></div>
        </div>
    </div>
</section>

<!-- CONFIRMACI√ìN -->
<section class="section bg-photo photo7">
    <div class="card animate center">
        <h2>Confirmaci√≥n de asistencia</h2>
        <hr>
        <p id="msg-confirmacion">Esperamos contar con tu presencia</p>
        <a class="btn-principal" href="#" id="confirmarBtn">Confirmar asistencia</a>
    </div>
</section>

<!-- SCRIPTS -->
<script>
/* CONTADOR */
const target = new Date("2026-03-14T17:00:00").getTime();
setInterval(() => {
    const now = new Date().getTime();
    const diff = target - now;
    document.getElementById("d").innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
    document.getElementById("h").innerText = Math.floor((diff / (1000 * 60 * 60)) % 24);
    document.getElementById("m").innerText = Math.floor((diff / (1000 * 60)) % 60);
    document.getElementById("s").innerText = Math.floor((diff / 1000) % 60);
}, 1000);

/* URL PARAMS */
function getParam(p) {
    return new URLSearchParams(window.location.search).get(p);
}

const nombre = getParam("n");
const adultos = getParam("p");
const ninos = getParam("k");

if (nombre) document.querySelector(".nombre-invitado").textContent = nombre;
if (adultos) document.querySelector(".pases").textContent = "Pases asignados: " + adultos;

if (ninos && parseInt(ninos) > 0) {
    document.getElementById("num-ninos").textContent = ninos;
    document.getElementById("pases-ninos").style.display = "block";
    document.getElementById("texto-no-ninos").style.display = "none";
} else {
    document.getElementById("texto-ninos").style.display = "none";
    document.getElementById("texto-no-ninos").style.display = "block";
}

/* CONFIRMAR ASISTENCIA ‚Äî M√âTODO QUE S√ç FUNCIONA */
const scriptURL = "https://script.google.com/macros/s/AKfycbwMNS1cALxtTDfLkIYliw23gLPwUu87BeRjSH9BAMw2y_l_LUeJoAqc2XeMhhW8YE6UWg/exec";

document.getElementById("confirmarBtn").addEventListener("click", function(e){
    e.preventDefault();

    fetch(scriptURL, {
        method: "POST",
        mode: "no-cors",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            adultos: adultos || 0,
            ninos: ninos || 0
        })
    });

    document.getElementById("msg-confirmacion").innerText =
        "Asistencia confirmada üíç‚ú® ¬°Gracias!";
    this.style.display = "none";
});
</script>

</body>
</html>
