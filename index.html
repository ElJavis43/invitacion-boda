<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Invitaci√≥n Karla & Edgar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- FUENTES -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS (ruta segura) -->
    <link rel="stylesheet" href="./styles/style.css">
</head>

<body style="background:#000;color:#fff;">

<!-- AUDIO -->
<audio id="musica" preload="auto" loop>
    <source src="./audio/cancion.mp3" type="audio/mpeg">
</audio>

<!-- PORTADA -->
<section class="portada">
    <div class="portada-contenido animate">
        <h1 class="nombre-invitado">Invitado</h1>

        <p class="pases">Pases asignados: 0</p>

        <!-- SIN NI√ëOS -->
        <p id="texto-sin-ninos" class="nota" style="display:none;">
            Adultos buena noche, ni√±os buenas noches<br>
            <strong>(no se aceptan ni√±os)</strong>
        </p>

        <!-- CON NI√ëOS -->
        <p id="texto-con-ninos" class="nota" style="display:none;">
            Nos encantar√≠a que los ni√±os nos acompa√±en en esta celebraci√≥n tan especial,
            les pedimos amablemente su ayuda para supervisarlos durante todo el evento.
        </p>

        <a href="#invitacion" class="btn-principal" id="btn-asistir">Asistir</a>
    </div>
</section>

<!-- HERO -->
<section class="hero" id="invitacion">
    <div class="overlay"></div>
    <div class="hero-content animate">
        <h1 class="nombres">Karla & Edgar</h1>
        <p class="frase">Hemos decidido decir ‚Äús√≠‚Äù para toda la vida</p>
        <p class="fecha-grande">14 ¬∑ Marzo ¬∑ 2026</p>

        <div class="contador">
            <div><span id="d">0</span><small>D√≠as</small></div>
            <div><span id="h">0</span><small>Horas</small></div>
            <div><span id="m">0</span><small>Min</small></div>
            <div><span id="s">0</span><small>Seg</small></div>
        </div>
    </div>
</section>

<!-- CONFIRMACI√ìN -->
<section class="section bg-photo photo7">
    <div class="card animate center">
        <h2>Confirmaci√≥n de asistencia</h2>
        <hr>
        <p>Esperamos contar con tu presencia</p>
        <a class="btn-principal" id="btn-confirmar">Confirmar asistencia</a>
        <p id="mensaje-confirmacion"></p>
    </div>
</section>

<!-- SCRIPTS -->
<script>
/* CONTADOR */
const target = new Date("2026-03-14T17:00:00").getTime();
setInterval(() => {
    const now = Date.now();
    const diff = target - now;
    document.getElementById("d").textContent = Math.max(0, Math.floor(diff / 86400000));
    document.getElementById("h").textContent = Math.max(0, Math.floor(diff / 3600000) % 24);
    document.getElementById("m").textContent = Math.max(0, Math.floor(diff / 60000) % 60);
    document.getElementById("s").textContent = Math.max(0, Math.floor(diff / 1000) % 60);
}, 1000);

/* ANIMACIONES */
const observer = new IntersectionObserver(entries => {
    entries.forEach(e => e.isIntersecting && e.target.classList.add("show"));
});
document.querySelectorAll(".animate").forEach(el => observer.observe(el));

/* PARAMETROS */
const p = new URLSearchParams(window.location.search);
const nombre = p.get("n");
const adultos = p.get("p");
const ninos = p.get("k");

if (nombre) document.querySelector(".nombre-invitado").textContent = nombre;
if (adultos) document.querySelector(".pases").textContent = "Pases asignados: " + adultos;

if (ninos && Number(ninos) > 0) {
    document.getElementById("texto-con-ninos").style.display = "block";
} else {
    document.getElementById("texto-sin-ninos").style.display = "block";
}

/* MUSICA */
document.getElementById("btn-asistir").addEventListener("click", () => {
    const audio = document.getElementById("musica");
    audio.muted = false;
    audio.play().catch(()=>{});
});

/* CONFIRMAR */
document.getElementById("btn-confirmar").addEventListener("click", () => {
    fetch("https://script.google.com/macros/s/AKfycbwMNS1cALxtTDfLkIYliw23gLPwUu87BeRjSH9BAMw2y_l_LUeJoAqc2XeMhhW8YE6UWg/exec", {
        method: "POST",
        body: JSON.stringify({ nombre, adultos, ninos })
    })
    .then(() => {
        document.getElementById("mensaje-confirmacion").textContent = "Asistencia confirmada üíç";
    });
});
</script>

</body>
</html>
